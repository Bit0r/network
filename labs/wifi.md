到目前为止，在所有的Wireshark实验室里，我们已经捕捉到了有线以太网连接上的帧。在这里，由于802.11是一个无线链路层协议，我们将“空气中”捕获帧。不幸的是，无线802.11网卡的一些设备驱动程序仍然没有提供钩子来捕获/复制Wireshark中使用的802.11帧（有关数据包捕获的概述，请参阅实验1中的图1）。因此，在本实验室中，我们将提供捕获的802.11帧的跟踪，以便您分析并在下面的问题中假设您正在使用此跟踪。如果你能用你的Wireshark版本捕捉802.11帧，欢迎你这么做。

# 开始
下载[zip文件](http://ethereal.educas.ethereal)提取Wireshark_802_11.pcap文件。该跟踪是使用AirCap和Wireshark在作者之一的家庭网络中运行的计算机上收集的，该计算机由Linksys 802.11g组合接入点/路由器组成，两台有线PC和一台无线主机PC连接到接入点/路由器。作者很幸运，在邻近的房子里也有其他的接入点。在这个跟踪文件中，我们将看到在通道6上捕获的帧。由于我们感兴趣的主机和AP并不是使用信道6的唯一设备，因此我们将看到许多我们在本实验室中不感兴趣的帧，例如同样在信道6上运行的邻居的AP发布的信标帧。跟踪文件中的无线主机活动包括：

* 当跟踪开始时，主机已与*30 Munroe St*AP关联。
* 当*t=24.82*时，主机向<http://gaia.cs.umass.edu/wireshark-labs/alice.txt>发起一个HTTP请求。`gaia.cs.umass.edu`的IP地址为`128.119.245.12`。
* 当*t=32.82*时，主机向<http://www.cs.umass.edu>发起一个HTTP请求，其IP地址为`128.119.240.19`。
* 当*t=49.58*时，主机与AP*30 Munroe St*断开连接，并尝试连接到*linksys_ses_24086*。这不是一个开放的接入点，因此主机最终无法连接到此AP。
* 当*t=63.0*时，主机放弃尝试与*linksys_seu 24086*关联，并再次与*30 Munroe St*接入点关联。

下载跟踪后，可以将其加载到Wireshark并使用*文件*下拉菜单查看跟踪，选择*打开*，然后选择*Wireshark_802_11.pcap*跟踪文件。结果显示应该如图1所示。

![](media/wifi/image1.png)
**图1：**打开*Wireshark_802_11.pcap*文件后的Wireshark窗口

# 信标帧

回想一下，802.11 AP使用信标帧来宣传它的存在。要回答下面的一些问题，您需要查看Wireshark中间窗口的“iEEE 802.11”帧和子字段的详细信息。如果可能，在回答下面的问题时，您应该在您用来回答所问问题的跟踪中提交一份数据包的打印输出。在打印件上加上注释，解释你的答案。要打印数据包，请使用*文件->打印*，选择*仅选定数据包*，选择*数据包摘要行*，然后选择回答问题所需的最小数据包详细信息量。

1. 此跟踪中发出大多数信标帧的两个接入点的SSID是什么？

linksys12；30 Munroe St

2. *linksys_24086*接入点发送信标帧的时间间隔是多少？*30 Munroe St*接入点呢？（提示：这个时间间隔包含在信标帧本身中）。

都是0.1024s

3. *30 Munroe St*的信标帧上的MAC源地址是什么（以十六进制表示）？回想一下书中的图7.13：源、目标和BSS是802.11帧中使用的三个地址。

00:16:b6:f7:1d:51

4. *30 Munroe St*的信标帧上的MAC目标地址是什么（以十六进制表示）？
ff:ff:ff:ff:ff:ff

5. *30 Munroe St*的信标帧上的MAC BSS ID是什么（用十六进制表示法）？

00:16:b6:f7:1d:51

6. *30 Munroe St*接入点的信标帧宣告这个接入点可以支持4个数据速率和8个附加的“扩展支持速率”。这些速率是多少？

1(B)、2(B)、5.5(B)、11(B)；6(B)、9(B)、12(B)、18(B)、24(B)、36(B)、48(B)、54(B)

# 数据传输

由于跟踪是从已经与AP关联的主机开始的，所以在查看AP关联/解除关联之前，让我们先看看802.11关联上的数据传输。回想一下，在这个跟踪中，当*t=24.82*时，主机向<http://gaia.cs.umass.edu/wireshark-labs/alice.txt>发起一个HTTP请求。`gaia.cs.umass.edu`的IP地址是`128.119.245.12`。然后，在*t=32.82*，主机向<http://www.cs.umass.edu>发起一个HTTP请求。

7. 找到802.11帧，其中包含第一个TCP会话的SYN TCP段（下载*alice.txt*)。 802.11帧中的三个MAC地址字段是什么？此帧中哪个MAC地址对应于无线主机（给出主机MAC地址的十六进制表示）？到接入点？到第一跳路由器？发送此TCP段的无线主机的IP地址是什么？目标IP地址是什么？这个目标IP地址是否对应于主机、接入点、第一跳路由器或其他网络连接设备？解释一下。

目的，源和BSS\
00:13:02:d1:b6:4f\
00:16:b6:f4:eb:a8\
00:16:b6:f7:1d:51\
192.168.1.109\
128.119.245.12\
目标IP是`gaia.cs.umass.edu`的IP地址。因为AP是链路层设备，所以它既不能“说”IP也不能理解IP
